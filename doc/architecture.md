# OpenManus 架构图

## 系统组件关系图

```
+------------------------------------------+
|                  用户                     |
+------------------+---------------------+
                   |
                   v
+------------------+---------------------+
|              入口点                      |
|  +------------+  +------------+        |
|  |  main.py   |  |   app.py   |        |
|  +------------+  +------------+        |
+------------------+---------------------+
                   |
                   v
+------------------+---------------------+
|              代理层                      |
|  +------------+  +------------+        |
|  | BaseAgent  |->| ReActAgent |->+     |
|  +------------+  +------------+  |     |
|                                  |     |
|  +------------+  +------------+  |     |
|  |ToolCallAgent|<-|   Manus   |<-+     |
|  +------------+  +------------+        |
+------------------+---------------------+
                   |
                   v
+------------------+---------------------+
|              工具层                      |
|  +------------+                        |
|  |  BaseTool  |                        |
|  +------------+                        |
|        ^                               |
|        |                               |
|  +-----+------+                        |
|  |ToolCollection|                      |
|  +-----+------+                        |
|        |                               |
|        v                               |
|  +------------+  +------------+        |
|  |BrowserUseTool| |GoogleSearch|       |
|  +------------+  +------------+        |
|                                        |
|  +------------+  +------------+        |
|  |PythonExecute| |  FileSaver |        |
|  +------------+  +------------+        |
+------------------+---------------------+
                   |
                   v
+------------------+---------------------+
|              LLM层                      |
|  +------------+  +------------+        |
|  |    LLM     |->|  OpenAI API |       |
|  +------------+  +------------+        |
|        |                               |
|        +------->+------------+         |
|                 | Azure OpenAI|        |
|                 +------------+         |
+------------------------------------------+
```

## 数据流图

```
+-------------+     请求     +-------------+
|    用户     | -----------> |   入口点    |
+-------------+              +-------------+
      ^                           |
      |                           v
      |                     +-------------+
      |                     |   代理层    |
      |                     +-------------+
      |                           |
      |                           v
+-------------+     结果     +-------------+
|   Web界面   | <----------- |   工具层    |
+-------------+              +-------------+
                                  |
                                  v
                            +-------------+
                            |    LLM层    |
                            +-------------+
```

## 代理执行流程

```
+-------------+     请求     +-------------+
|    用户     | -----------> |   Manus代理  |
+-------------+              +-------------+
                                  |
                                  v
                            +-------------+
                            |    思考     | <-+
                            |   (Think)   |   |
                            +-------------+   |
                                  |           |
                                  v           |
                            +-------------+   |
                            |    行动     |   |
                            |    (Act)    |   |
                            +-------------+   |
                                  |           |
                                  +----------->
                                  |
                                  v
+-------------+     结果     +-------------+
|    用户     | <----------- |   Manus代理  |
+-------------+              +-------------+
```

## 工具调用流程

```
+-------------+     请求     +-------------+
| ToolCallAgent| -----------> |    LLM     |
+-------------+              +-------------+
      |                           |
      v                           v
+-------------+     工具调用  +-------------+
| ToolCollection| <---------- |  工具调用响应 |
+-------------+              +-------------+
      |
      v
+-------------+
|  具体工具实现 |
+-------------+
      |
      v
+-------------+
|  执行结果    |
+-------------+
      |
      v
+-------------+
| ToolCallAgent|
+-------------+
```

## Web应用架构

```
+-------------+     HTTP请求  +-------------+
|   浏览器    | -----------> |   FastAPI   |
+-------------+              +-------------+
      ^                           |
      |                           v
      |                     +-------------+
      |                     | 任务管理器   |
      |                     +-------------+
      |                           |
      |                           v
      |                     +-------------+
      |                     |  Manus代理  |
      |                     +-------------+
      |                           |
      |                           v
+-------------+     SSE      +-------------+
|   浏览器    | <----------- |  事件流     |
+-------------+              +-------------+
``` 